<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Statistical Analysis and Organization</title>
    <meta charset="utf-8" />
    <meta name="author" content="Angela Freeman" />
    <link href="libs/remark-css/rladies.css" rel="stylesheet" />
    <script src="libs/htmlwidgets/htmlwidgets.js"></script>
    <script src="libs/jquery/jquery.min.js"></script>
    <link href="libs/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
    <script src="libs/datatables-binding/datatables.js"></script>
    <link href="libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="libs/dt-core/js/jquery.dataTables.min.js"></script>
    <link href="libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
    <script src="libs/crosstalk/js/crosstalk.min.js"></script>
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Statistical Analysis and Organization
## and other important things about data management
### Angela Freeman
### Ophir Lab
### 2020/6/25 (updated: 2020-07-06)

---




class: inverse, center, middle

# The importance of reproducibility


---

# What are the issues in data management specific to our field?

- Keeping good records  

- Finding and fixing errors  

- Maintaining consistency when personnel changes  


---
class: inverse, center, middle
## #1: Keeping good records

---

&lt;img src="twitter_names.PNG" width="500" height = "400" /&gt;

---

Please don't do this (finalfinalfinal.doc). If you are using box as a repository here is a suggestion:
1. Work locally (on your desktop) and upload every few hours or every day your edits.
(If you do this, BOX will have a record of your changes going back ~100-300 versions). If you work on the cloud version, it saves every 5-10 minutes, which means that if you are working on a large document that takes a long time, and you need to revisit something from 2 weeks ago, that version might not exist anymore.

2. Set reasonable scheduled times to go through your files and do housekeeping of anything that doesn't need to exist anymore. It might have made sense to have a few versions on your local harddrive while doing edits with another person, but once the paper is out or you've moved on to a new step, delete those additional files. Don't be a person who leaves their data files named 'analyzethis.xls'  

3. If you're using word and it crashes, after you save your recovered version, delete the other version.


---

## A recommendation

Consider doing this for your files:
IN ONE FOLDER NAMED FOR THE PROJECT

/readme &lt;-- a readme file that has information about the files themselves. If something needs to be done first, or data need to be inputted in a special way, note it here  

/analysis.R &lt;-- a master script. For most of us, one script is probably enough, though in bioinformatics, you might have several processes that need to run sequentially.  

/data-raw/ &lt;-- folder with raw files (i.e. downloaded from noldus)  

/data/ &lt;-- 'clean' data after script processing  

/R/ &lt;-- specialty functions  

/doc/ &lt;-- manuscripts  

/figs/ &lt;-- final figures if they need separate submission  

/output/ &lt;-- any other code outputs that might need to be kept

*You might also include in the readme where data are stored (videos, audio, project files, extrabrains) including how they are labelled. If your data are stored in a repository like the OSF, you won't need to have a data/ folder*

---
class: center, middle
## Consider using a backup and version control for stats code
---

# What is Git and Github?

## It is version control for your code.

- I learned how to do version control with git via this site: https://happygitwithr.com/  

&lt;img src="https://github.blog/wp-content/uploads/2015/11/2b38e278-8c46-11e5-8a25-06aa80342ad1.png?fit=2680%2C1720" width="600" height = "400" /&gt;



## What is the benefit of using Git and Github compared to just saving my code files to box?

Probably you will want to upload your final files on some Cornell repository before you finish a project. 

However, with RStudio (which I think most of us use, there is integration with git so you just have to click a few buttons.)
---

&lt;img src="Push_git.PNG" width="800" height = "600" /&gt;

---

&lt;img src="commit.PNG" width="800" height = "600" /&gt;
---

## Are there other features?

Sure! You can share your code with others (e.g. colleagues!)

They can send their own pushes to your code and it can make a new branch, or you can commit it to your 'main'.

The best feature is that it's EASY. Literally just some clicky clicks in Rstudio.

---
## A last word about keeping good records
- Use a lab notebook, either paper or digital.
    - digital can be searched, but if you are in a facility where using personal items is a no-no, keep paper records and transfer them later
- Recommend keeping a table of contents at the start
- You can refer then to protocols on a specific page with any chages
- It really should be EASY to understand what was done
- It will benefit you in the long run (and in the short run)
- If you take paper notes, upload them to a repository (box or a server)
    - a flash drive is an unnacceptable repository and should be treated as a ticking time bomb of data loss.


---
## Keeping good records summary:

### Make sure your files are organized, well-labeled and backed up
   - delete useless stuff on a regular schedule

### Use a time-machine/version control (e.g. Box if you use word; Git/github for code)

### Keep notes on everthing and make sure they are clear!
---

class: inverse, center, middle
## #2: Finding and Fixing Errors

---
# First off, what is R?

- a programming language that is FREE

- you can make fancy graphics

- things in R are easily reproducible!!!!!!
   - you are less likely to forget whether you ran an independent or paired t-test because you can see your script of what was run right in front of you.

---
#Example 1

I can load data from a repository...


---


```r
## Example, pull code from open science framework

osf_retrieve_node("https://osf.io/jfg7b") %&gt;%
    osf_ls_files() %&gt;%
    osf_download(conflicts= "overwrite")
```

```
## # A tibble: 4 x 4
##   name              id                       local_path          meta           
##   &lt;chr&gt;             &lt;chr&gt;                    &lt;chr&gt;               &lt;list&gt;         
## 1 OLPcombined2.csv  5e8640648140b40241421ff8 ./OLPcombined2.csv  &lt;named list [3~
## 2 selfrec.csv       5e8640678140b40240421f64 ./selfrec.csv       &lt;named list [3~
## 3 IRR.csv           5e86406bd0e3540239b45e6d ./IRR.csv           &lt;named list [3~
## 4 OLP_publication.R 5ec4077af3e87e005b5742f3 ./OLP_publication.R &lt;named list [3~
```

---


```r
olpdata &lt;-read.csv(file="OLPcombined2.csv")

glimpse(olpdata)
```

```
## Rows: 560
## Columns: 31
## $ ID                  &lt;int&gt; 1505679, 1505679, 1505679, 1505679, 1505679, 15...
## $ Sex                 &lt;chr&gt; "Female", "Female", "Female", "Female", "Female...
## $ Date                &lt;chr&gt; "11/9/2018", "11/9/2018", "11/9/2018", "11/9/20...
## $ Trial               &lt;int&gt; 1, 2, 3, 4, 4, 1, 2, 3, 4, 4, 1, 2, 3, 4, 4, 1,...
## $ Scent.sex           &lt;chr&gt; "F", "F", "F", "F", "F", "F", "F", "F", "F", "F...
## $ Individual          &lt;chr&gt; "n", "n", "n", "n", "n", "y", "y", "y", "y", "y...
## $ Experiment.Type     &lt;chr&gt; "FFhabdiscrim", "FFhabdiscrim", "FFhabdiscrim",...
## $ Sniff.Duration      &lt;dbl&gt; 0.00, 0.00, 0.00, 0.00, 0.82, 0.00, 0.00, 10.29...
## $ Side.Duration       &lt;dbl&gt; 199.93, 149.50, 2.69, 298.03, 2.54, 297.59, 0.0...
## $ Sniff.Freq          &lt;int&gt; 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ Side.Freq           &lt;int&gt; 1, 4, 1, 1, 1, 1, 0, 2, 0, 1, 1, 1, 3, 1, 0, 2,...
## $ Familiar.Novel      &lt;chr&gt; "Familiar", "Familiar", "Familiar", "Familiar",...
## $ DonorID             &lt;int&gt; 1506677, 1506677, 1506677, 1506677, 1511027, 15...
## $ DonorAGD            &lt;dbl&gt; 2.9, 2.9, 2.9, 2.9, 3.5, 3.4, 3.4, 3.4, 3.4, 3....
## $ Sniff.Duration.1    &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0.00, 0...
## $ Side.Duration.1     &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 8.64, 3...
## $ Sniff.Freq.1        &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0, 0, 0...
## $ Side.Freq.1         &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, 1, 3...
## $ Familiar.Novel.1    &lt;chr&gt; "Familiar", "Familiar", "Familiar", "Familiar",...
## $ Sniff.Duration.MEAN &lt;dbl&gt; 0.00, 0.00, 0.00, 0.00, 0.82, 0.00, 0.00, 10.29...
## $ Sniff.Duration.SD   &lt;chr&gt; "#DIV/0!", "#DIV/0!", "#DIV/0!", "#DIV/0!", "#D...
## $ Side.Duration.MEAN  &lt;dbl&gt; 199.93, 149.50, 2.69, 298.03, 2.54, 297.59, 0.0...
## $ Side.Duration.SD    &lt;chr&gt; "#DIV/0!", "#DIV/0!", "#DIV/0!", "#DIV/0!", "#D...
## $ Sniff.Freq.MEAN     &lt;dbl&gt; 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ Sniff.Freq.SD       &lt;chr&gt; "#DIV/0!", "#DIV/0!", "#DIV/0!", "#DIV/0!", "#D...
## $ Side.Freq.MEAN      &lt;dbl&gt; 1, 4, 1, 1, 1, 1, 0, 2, 0, 1, 1, 1, 3, 1, 0, 2,...
## $ Side.Freq.SD        &lt;chr&gt; "#DIV/0!", "#DIV/0!", "#DIV/0!", "#DIV/0!", "#D...
## $ Familiar.Novel.2    &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...
## $ X                   &lt;chr&gt; "", "", "", "", "", "", "", "", "", "", "", "",...
## $ Differencesniff     &lt;dbl&gt; NA, NA, NA, NA, 0.82, NA, NA, NA, NA, 0.00, NA,...
## $ Differenceside      &lt;dbl&gt; NA, NA, NA, NA, -295.49, NA, NA, NA, NA, 300.63...
```
---
## As a reminder if you use IDs or trial/set/replicate numbers, make sure these are set as factors so that your models don't treat them as numbers. 

```r
## set ID as a factor using tidy and pipes
data.tidy &lt;- olpdata %&gt;% mutate(
              ID = (factor(ID)), DonorID = (factor(DonorID)), 
              Sex = (factor(Sex)), Scent.sex = (factor(Scent.sex)),
              Trial = (factor(Trial))
)
```

The pipe %&gt;% basically means 'and then do'

---


```r
glimpse(data.tidy)
```

```
## Rows: 560
## Columns: 31
## $ ID                  &lt;fct&gt; 1505679, 1505679, 1505679, 1505679, 1505679, 15...
## $ Sex                 &lt;fct&gt; Female, Female, Female, Female, Female, Female,...
## $ Date                &lt;chr&gt; "11/9/2018", "11/9/2018", "11/9/2018", "11/9/20...
## $ Trial               &lt;fct&gt; 1, 2, 3, 4, 4, 1, 2, 3, 4, 4, 1, 2, 3, 4, 4, 1,...
## $ Scent.sex           &lt;fct&gt; F, F, F, F, F, F, F, F, F, F, M, M, M, M, M, M,...
## $ Individual          &lt;chr&gt; "n", "n", "n", "n", "n", "y", "y", "y", "y", "y...
## $ Experiment.Type     &lt;chr&gt; "FFhabdiscrim", "FFhabdiscrim", "FFhabdiscrim",...
## $ Sniff.Duration      &lt;dbl&gt; 0.00, 0.00, 0.00, 0.00, 0.82, 0.00, 0.00, 10.29...
## $ Side.Duration       &lt;dbl&gt; 199.93, 149.50, 2.69, 298.03, 2.54, 297.59, 0.0...
## $ Sniff.Freq          &lt;int&gt; 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ Side.Freq           &lt;int&gt; 1, 4, 1, 1, 1, 1, 0, 2, 0, 1, 1, 1, 3, 1, 0, 2,...
## $ Familiar.Novel      &lt;chr&gt; "Familiar", "Familiar", "Familiar", "Familiar",...
## $ DonorID             &lt;fct&gt; 1506677, 1506677, 1506677, 1506677, 1511027, 15...
## $ DonorAGD            &lt;dbl&gt; 2.9, 2.9, 2.9, 2.9, 3.5, 3.4, 3.4, 3.4, 3.4, 3....
## $ Sniff.Duration.1    &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0.00, 0...
## $ Side.Duration.1     &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 8.64, 3...
## $ Sniff.Freq.1        &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 0, 0, 0...
## $ Side.Freq.1         &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 1, 1, 3...
## $ Familiar.Novel.1    &lt;chr&gt; "Familiar", "Familiar", "Familiar", "Familiar",...
## $ Sniff.Duration.MEAN &lt;dbl&gt; 0.00, 0.00, 0.00, 0.00, 0.82, 0.00, 0.00, 10.29...
## $ Sniff.Duration.SD   &lt;chr&gt; "#DIV/0!", "#DIV/0!", "#DIV/0!", "#DIV/0!", "#D...
## $ Side.Duration.MEAN  &lt;dbl&gt; 199.93, 149.50, 2.69, 298.03, 2.54, 297.59, 0.0...
## $ Side.Duration.SD    &lt;chr&gt; "#DIV/0!", "#DIV/0!", "#DIV/0!", "#DIV/0!", "#D...
## $ Sniff.Freq.MEAN     &lt;dbl&gt; 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ Sniff.Freq.SD       &lt;chr&gt; "#DIV/0!", "#DIV/0!", "#DIV/0!", "#DIV/0!", "#D...
## $ Side.Freq.MEAN      &lt;dbl&gt; 1, 4, 1, 1, 1, 1, 0, 2, 0, 1, 1, 1, 3, 1, 0, 2,...
## $ Side.Freq.SD        &lt;chr&gt; "#DIV/0!", "#DIV/0!", "#DIV/0!", "#DIV/0!", "#D...
## $ Familiar.Novel.2    &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...
## $ X                   &lt;chr&gt; "", "", "", "", "", "", "", "", "", "", "", "",...
## $ Differencesniff     &lt;dbl&gt; NA, NA, NA, NA, 0.82, NA, NA, NA, NA, 0.00, NA,...
## $ Differenceside      &lt;dbl&gt; NA, NA, NA, NA, -295.49, NA, NA, NA, NA, 300.63...
```

---

class: center, middle
What sorts of things should I look for in my data?

---
Look to make sure that your numbers make sense.


```r
plot(data.tidy$Side.Duration)
```

![](markdown_pres_files/figure-html/unnamed-chunk-6-1.png)&lt;!-- --&gt;

---
Double check that your n's are what you expect. If you ran 14 females, you should have 14 females in your data.

```r
summary(data.tidy)
```

```
##        ID          Sex          Date           Trial   Scent.sex
##  1505679: 20   Female:280   Length:560         1:112   F:280    
##  1507783: 20   Male  :280   Class :character   2:112   M:280    
##  1507940: 20                Mode  :character   3:112            
##  1508553: 20                                   4:224            
##  1508745: 20                                                    
##  1508819: 20                                                    
##  (Other):440                                                    
##   Individual        Experiment.Type    Sniff.Duration    Side.Duration   
##  Length:560         Length:560         Min.   :  0.000   Min.   :  0.00  
##  Class :character   Class :character   1st Qu.:  0.000   1st Qu.: 78.91  
##  Mode  :character   Mode  :character   Median :  0.000   Median :149.50  
##                                        Mean   :  3.289   Mean   :148.64  
##                                        3rd Qu.:  1.295   3rd Qu.:215.18  
##                                        Max.   :271.270   Max.   :300.96  
##                                        NA's   :45        NA's   :45      
##    Sniff.Freq       Side.Freq     Familiar.Novel        DonorID   
##  Min.   :0.0000   Min.   : 0.00   Length:560         1511609: 51  
##  1st Qu.:0.0000   1st Qu.: 2.00   Class :character   1508553: 36  
##  Median :0.0000   Median : 4.00   Mode  :character   1508919: 34  
##  Mean   :0.7922   Mean   : 8.07                      1510698: 29  
##  3rd Qu.:1.0000   3rd Qu.:11.00                      1510299: 27  
##  Max.   :9.0000   Max.   :52.00                      1510219: 24  
##  NA's   :45       NA's   :45                         (Other):359  
##     DonorAGD     Sniff.Duration.1  Side.Duration.1   Sniff.Freq.1   
##  Min.   :2.600   Min.   :  0.000   Min.   :  0.00   Min.   :0.0000  
##  1st Qu.:3.200   1st Qu.:  0.000   1st Qu.: 83.55   1st Qu.:0.0000  
##  Median :3.500   Median :  0.000   Median :146.94   Median :0.0000  
##  Mean   :4.796   Mean   :  2.838   Mean   :151.49   Mean   :0.7323  
##  3rd Qu.:6.500   3rd Qu.:  0.550   3rd Qu.:214.31   3rd Qu.:1.0000  
##  Max.   :7.800   Max.   :269.360   Max.   :300.00   Max.   :7.0000  
##  NA's   :14      NA's   :291       NA's   :291      NA's   :291     
##   Side.Freq.1     Familiar.Novel.1   Sniff.Duration.MEAN Sniff.Duration.SD 
##  Min.   : 0.000   Length:560         Min.   :  0.000     Length:560        
##  1st Qu.: 2.000   Class :character   1st Qu.:  0.000     Class :character  
##  Median : 5.000   Mode  :character   Median :  0.000     Mode  :character  
##  Mean   : 7.803                      Mean   :  3.071                       
##  3rd Qu.:10.000                      3rd Qu.:  1.155                       
##  Max.   :53.000                      Max.   :270.320                       
##  NA's   :291                                                               
##  Side.Duration.MEAN Side.Duration.SD   Sniff.Freq.MEAN  Sniff.Freq.SD     
##  Min.   :  0.0      Length:560         Min.   :0.0000   Length:560        
##  1st Qu.: 78.0      Class :character   1st Qu.:0.0000   Class :character  
##  Median :150.1      Mode  :character   Median :0.0000   Mode  :character  
##  Mean   :149.1                         Mean   :0.7946                     
##  3rd Qu.:216.1                         3rd Qu.:1.0000                     
##  Max.   :300.6                         Max.   :9.0000                     
##                                                                           
##  Side.Freq.MEAN   Side.Freq.SD       Familiar.Novel.2      X            
##  Min.   : 0.000   Length:560         Mode:logical     Length:560        
##  1st Qu.: 2.000   Class :character   NA's:560         Class :character  
##  Median : 4.000   Mode  :character                    Mode  :character  
##  Mean   : 7.904                                                         
##  3rd Qu.:10.000                                                         
##  Max.   :52.500                                                         
##                                                                         
##  Differencesniff    Differenceside   
##  Min.   :-13.5800   Min.   :-300.40  
##  1st Qu.: -0.1850   1st Qu.:-110.57  
##  Median :  0.0000   Median :  16.75  
##  Mean   :  0.6312   Mean   :  16.01  
##  3rd Qu.:  0.7450   3rd Qu.: 151.80  
##  Max.   : 21.8900   Max.   : 300.63  
##  NA's   :448        NA's   :448
```
---
I know that I ran 4 experiment types, and there are 5 lines of data each. So each animal should have 20 data points.


```r
#Check number from sex.
280/20
```

```
## [1] 14
```

---


```r
#summarize data and select discrimination trials
sum_data &lt;- data.tidy %&gt;% filter(Trial==4) %&gt;%
    group_by(Sex, Experiment.Type, Scent.sex, 
             Familiar.Novel, Individual) %&gt;%
    summarize(sniff_mean = mean(Sniff.Duration.MEAN),
              side_mean = mean(Side.Duration.MEAN),
              n_datapoints = n()) %&gt;%
  ungroup()
```

```
## `summarise()` regrouping output by 'Sex', 'Experiment.Type', 'Scent.sex', 'Familiar.Novel' (override with `.groups` argument)
```

```r
sum_data
```

```
## # A tibble: 16 x 8
##    Sex   Experiment.Type Scent.sex Familiar.Novel Individual sniff_mean
##    &lt;fct&gt; &lt;chr&gt;           &lt;fct&gt;     &lt;chr&gt;          &lt;chr&gt;           &lt;dbl&gt;
##  1 Fema~ FFhabdiscrim    F         Familiar       n               0.538
##  2 Fema~ FFhabdiscrim    F         Novel          n               0.887
##  3 Fema~ FFindhabdiscrim F         Familiar       y               1.71 
##  4 Fema~ FFindhabdiscrim F         Novel          y               1.36 
##  5 Fema~ MMhabdiscrim    M         Familiar       n               0.883
##  6 Fema~ MMhabdiscrim    M         Novel          n               3.59 
##  7 Fema~ MMindhabdiscrim M         Familiar       y               1.06 
##  8 Fema~ MMindhabdiscrim M         Novel          y               3.35 
##  9 Male  FFhabdiscrim    F         Familiar       n               0.545
## 10 Male  FFhabdiscrim    F         Novel          n               0.388
## 11 Male  FFindhabdiscrim F         Familiar       y               1.18 
## 12 Male  FFindhabdiscrim F         Novel          y               0.516
## 13 Male  MMhabdiscrim    M         Familiar       n               0.277
## 14 Male  MMhabdiscrim    M         Novel          n               0.781
## 15 Male  MMindhabdiscrim M         Familiar       y               1.24 
## 16 Male  MMindhabdiscrim M         Novel          y               1.21 
## # ... with 2 more variables: side_mean &lt;dbl&gt;, n_datapoints &lt;int&gt;
```

---
Or, I can use the kable function to make a nice table.


```r
knitr::kable(sum_data, format = "html")
```

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; Sex &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Experiment.Type &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Scent.sex &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Familiar.Novel &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Individual &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; sniff_mean &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; side_mean &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n_datapoints &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Female &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FFhabdiscrim &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; F &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Familiar &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; n &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.5378571 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 122.9593 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Female &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FFhabdiscrim &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; F &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Novel &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; n &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.8871429 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 177.3886 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Female &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FFindhabdiscrim &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; F &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Familiar &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; y &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.7071429 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 129.7214 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Female &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FFindhabdiscrim &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; F &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Novel &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; y &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.3557143 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 170.4164 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Female &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MMhabdiscrim &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; M &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Familiar &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; n &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.8828571 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 142.0964 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Female &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MMhabdiscrim &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; M &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Novel &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; n &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.5885714 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 158.1429 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Female &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MMindhabdiscrim &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; M &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Familiar &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; y &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.0571429 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 128.4157 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Female &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MMindhabdiscrim &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; M &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Novel &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; y &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3.3528571 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 171.9414 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Male &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FFhabdiscrim &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; F &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Familiar &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; n &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.5450000 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 125.7714 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Male &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FFhabdiscrim &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; F &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Novel &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; n &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.3878571 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 172.1286 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Male &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FFindhabdiscrim &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; F &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Familiar &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; y &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.1757143 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 146.0750 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Male &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; FFindhabdiscrim &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; F &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Novel &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; y &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.5164286 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 143.1821 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Male &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MMhabdiscrim &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; M &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Familiar &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; n &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2771429 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 188.1579 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Male &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MMhabdiscrim &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; M &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Novel &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; n &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.7814286 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 108.2986 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Male &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MMindhabdiscrim &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; M &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Familiar &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; y &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.2428571 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 160.2486 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Male &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; MMindhabdiscrim &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; M &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Novel &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; y &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1.2071429 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 138.7214 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---
And for the sake of presentation, I can even use a javascript widget to show all the data in cool ways

```r
DT::datatable(
  sum_data,
  fillContainer = FALSE, options = list(pageLength = 8)
)
```

<div id="htmlwidget-f08cfcd33d6acc59c3ad" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-f08cfcd33d6acc59c3ad">{"x":{"filter":"none","fillContainer":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16"],["Female","Female","Female","Female","Female","Female","Female","Female","Male","Male","Male","Male","Male","Male","Male","Male"],["FFhabdiscrim","FFhabdiscrim","FFindhabdiscrim","FFindhabdiscrim","MMhabdiscrim","MMhabdiscrim","MMindhabdiscrim","MMindhabdiscrim","FFhabdiscrim","FFhabdiscrim","FFindhabdiscrim","FFindhabdiscrim","MMhabdiscrim","MMhabdiscrim","MMindhabdiscrim","MMindhabdiscrim"],["F","F","F","F","M","M","M","M","F","F","F","F","M","M","M","M"],["Familiar","Novel","Familiar","Novel","Familiar","Novel","Familiar","Novel","Familiar","Novel","Familiar","Novel","Familiar","Novel","Familiar","Novel"],["n","n","y","y","n","n","y","y","n","n","y","y","n","n","y","y"],[0.537857142857143,0.887142857142857,1.70714285714286,1.35571428571429,0.882857142857143,3.58857142857143,1.05714285714286,3.35285714285714,0.545,0.387857142857143,1.17571428571429,0.516428571428571,0.277142857142857,0.781428571428571,1.24285714285714,1.20714285714286],[122.959285714286,177.388571428571,129.721428571429,170.416428571429,142.096428571429,158.142857142857,128.415714285714,171.941428571429,125.771428571429,172.128571428571,146.075,143.182142857143,188.157857142857,108.298571428571,160.248571428571,138.721428571429],[14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Sex<\/th>\n      <th>Experiment.Type<\/th>\n      <th>Scent.sex<\/th>\n      <th>Familiar.Novel<\/th>\n      <th>Individual<\/th>\n      <th>sniff_mean<\/th>\n      <th>side_mean<\/th>\n      <th>n_datapoints<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":8,"columnDefs":[{"className":"dt-right","targets":[6,7,8]},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[8,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>

---
## If you know that for example, your numbers should be positive values and they aren't = issues.

- The easiest things to fix are errors in code/analysis.

- The most difficult things/impossible things are human error when there are not good notes.
    - e.g. was this animal female or male? two datasheets have differing information. How might you try to resolve this inconsistency? (Let's share!)

---

## Finding and Fixing errors summary:

### Use reproducible analyses (R) so you can always go back and revisit EXACTLY what you did

### 'Sit with your data' and check for outliers/inconsistencies in numbers/distributions

### Keep notes on everthing and make sure they are clear!



---

class: inverse, center, middle
## #3: Maintaining consistency
### Most of us already use R and there are major benefits for this consistency

---

## What are the essential-to-knows for me, the new R user in the lab?

- Learn to google your errors

- If you get an error in your code check
    - That your variables are the right type * class(x) *
    - That you've spelled things correctly
    - That you're in the right working directory * getwd() *
    - Check the case (upper/lower)
    
- Don't reinvent the wheel, others in the lab can help you and **share scripts**

- lme4 and emmeans packages will be your bffs and ggplot will be your nemesis.

- consider starting with Rmarkdown off the hop, and check out the packages redoc, citr, and rticles.

---
## What are the essential-to-knows for me, a sometimes-user of R in the lab?

- If you aren't using the dplyr package - check it out for data transforming 

&lt;img src="dplyr.PNG" width="300" height = "250" class="center" /&gt;

- Don't be afraid to make functions of things you do ALL THE TIME (e.g. standard error function) and share
- Don't be afriad to make changes to functions in packages if it helps you science! (e.g. Alex_theme())
- If you want it to exist, it might already exist in a package. R programmers are often found on twitter.

---

# Let's focus a little on R and Rmarkdown

### What is Rmarkdown? How could it help our work?

- Rmarkdown is a way to put your Rcode and written document together

- it uses a system to then output to PDF, WORD, and HTML (among others)


&lt;img src="https://bookdown.org/yihui/rmarkdown-cookbook/images/workflow.png" width="600" height = "300" /&gt;


---
# How does markdown work?

The 'yaml' (acronym: YAML ain't markup language) gives these parts of the workflow the information needed to make your final document when you 'knit'

e.g. 1 (THIS PRESENTATION)

    ```yaml
    title: "Statistical Analysis and Organization"
    subtitle: "and other important things about data management"
    author: "Angela Freeman"
    institute: "Ophir Lab"
    date: "2020/6/25 (updated: 2020-07-06)"
    output:
      xaringan::moon_reader:
        lib_dir: libs
        css: "rladies"
        nature:
          highlightStyle: github
          highlightLines: true
          countIncrementalSlides: false
    ```

---
e.g. 2 (PDF DOCUMENT)

    ```yaml
    ---
    title: "Year end report"
    author: "Angela Freeman"
    date: "2020/12/21"
    output: pdf_document
    ---
    ```
---
e.g. 3 (Template for PLOS from 'rticles')
    ```
    ---
    title: Title of submission to PLOS journal
    author:
      - name: Alice Anonymous
        email: alice@example.com
        affiliation: Some Institute of Technology
        corresponding: alice@example.com
      - name: Bob Security
        email: bob@example.com
        affiliation: Another University
    address:
      - code: Some Institute of Technology
        address: Department, Street, City, State, Zip
      - code: Another University
        address: Department, Street, City, State, Zip
    abstract: |
      Lorem ipsum dolor sit amet, consectetur adipiscing elit. 
  
    author_summary: |
      Lorem ipsum dolor sit amet, consectetur adipiscing elit.

    bibliography: mybibfile.bib
    output: rticles::plos_article
    csl: plos.csl
    ---
    ```

---

# You might think that with all this preamble it will be easier to just stick to your status quo.

## Let's watch this, then think about that internal dialogue again.

https://www.youtube.com/watch?v=s3JldKoA0zw


---
class: center, middle
## If you find yourself frustrated at making graphs, editing graphs, then copy and pasting into word over and over and over, Rmarkdown is your answer.


---

class: center, middle

# Thanks!

Slides created via the R package [**xaringan**](https://github.com/yihui/xaringan).




---
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
